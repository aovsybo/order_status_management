# order_status_management
# Задание
MVP Управление статусами заказов
Авторизованный пользователь может создать заявку (2 поля: название + статус)
На отдельной странице список заявок, при нажатии на элемент открывается страница заявки
На странице заявки слева название, справа - поле для отклика
Отклик может оставить только авторизованный пользователь, для неавторизованных - сообщить об этом и предложить войти в систему
Отклики записывается в базу в формате ID_заявки, текст отклика, id_пользователя, оставившего отклик
Автор заявки видит входящие отклики и может на них откликнуться текстом
Комментатор видит, что автор откликнулся на его сообщение и может продолжить диалог

# Описание
Back-end часть сервиса по управлению статусами заказов. Функционал включает в себя:
- Регистрацию и авторизацию
- Просмотр всех заявок
- Создание собственной заявки
- Возможность отклика на заявку
- Просмотр откликов на свои заявки
- Ведение чата с откликнувшимся

# Технологии
При разработке использовался фреймворк FastAPI <br/>
СУБД - PostgreSQL+asyncpg. ORM - SQLAlchemy, Alembic <br/>
Обмен сообщениями - websockets <br/>
Контейнеры - Docker, docker compose <br/>

# Запуск
Для запуска приложения необходимо в корне создать файл .env :
```
DB_HOST=
DB_PORT=
DB_NAME=
DB_USER=
DB_PASS=
POSTGRES_DB=
POSTGRES_USER=
POSTGRES_PASSWORD=
AUTH_SECRET=
MANAGER_SECRET=
```
Далее в корневом каталоге выполнить следующую команду:
```
docker compose up
```

# Пример работы
## Пользователи
Регистрация
![register](https://github.com/aovsybo/order_status_management/assets/66824112/506d0584-78ef-4953-a06d-1adb542fd7d8)

Авторизация
![login](https://github.com/aovsybo/order_status_management/assets/66824112/130beb55-e549-4acb-ade1-59f29677ff82)

## Запросы
Создание запроса
![add request](https://github.com/aovsybo/order_status_management/assets/66824112/244e8866-5dd9-47f8-95b5-9c451e0b8849)

Просмотр всех запросов
![get requests](https://github.com/aovsybo/order_status_management/assets/66824112/31e0068e-58e3-4203-ab4a-66338078c72b)

Просмотр запроса по id
![get request by id](https://github.com/aovsybo/order_status_management/assets/66824112/d078e03b-1bb4-4629-9eba-3b12da96fc75)

## Отклики
Отклик без авторизации
![response by unauthorused](https://github.com/aovsybo/order_status_management/assets/66824112/f8068b7e-b707-4946-957e-24d749cd4fd7)

Отклик user2 на запрос user1
![create response by user2](https://github.com/aovsybo/order_status_management/assets/66824112/bc9ea5b1-5887-4649-bea2-04bd038fea2b)

Просмотр входящих запросов user1
![incoming for user1](https://github.com/aovsybo/order_status_management/assets/66824112/9f59db54-bfda-46f5-8a7c-5b341ba14c20)

Просмотр входящих запросов user2
![incoming for user2](https://github.com/aovsybo/order_status_management/assets/66824112/7032fa9f-bdd7-4763-ba29-97b2252639c0)

# Чат
Отправка сообщения первым пользователем
![user1 send 1](https://github.com/aovsybo/order_status_management/assets/66824112/bb8fffae-2f1f-49f2-9555-29b526f3eb83)

Получение сообщения вторым пользователем
![user1 send user2 recieve](https://github.com/aovsybo/order_status_management/assets/66824112/c75d06d7-7de1-4f01-a7bc-f93f5922349e)

Отправка сообщения вторым пользователем
![user2 send](https://github.com/aovsybo/order_status_management/assets/66824112/e0948670-f3b8-41c3-8faf-4735f5c2fc8d)

Получение сообщения первым пользователем
![user2 send user1 recieve](https://github.com/aovsybo/order_status_management/assets/66824112/2cd5e870-29d5-4d57-9605-34c78aa7e95a)

